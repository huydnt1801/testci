-- Create "vehicle_drivers" table
CREATE TABLE `vehicle_drivers` (`id` bigint NOT NULL AUTO_INCREMENT, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL, `phone_number` varchar(15) NOT NULL, `full_name` varchar(255) NOT NULL, `password` varchar(255) NOT NULL, PRIMARY KEY (`id`), UNIQUE INDEX `phone_number` (`phone_number`)) CHARSET utf8mb4 COLLATE utf8mb4_bin;
-- Modify "trips" table
ALTER TABLE `trips` ADD COLUMN `driver_id` bigint NULL, ADD INDEX `trips_vehicle_drivers_trips` (`driver_id`), ADD CONSTRAINT `trips_vehicle_drivers_trips` FOREIGN KEY (`driver_id`) REFERENCES `vehicle_drivers` (`id`) ON UPDATE NO ACTION ON DELETE SET NULL;
-- Create "sessions" table
CREATE TABLE `sessions` (`id` bigint NOT NULL AUTO_INCREMENT, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL, `session_id` varchar(255) NOT NULL, `expire_in` timestamp NOT NULL, `revoked` bool NOT NULL DEFAULT 0, `user_id` bigint NULL, `driver_id` bigint NULL, PRIMARY KEY (`id`), INDEX `session_session_id` (`session_id`), INDEX `sessions_users_sessions` (`user_id`), INDEX `sessions_vehicle_drivers_sessions` (`driver_id`), CONSTRAINT `sessions_users_sessions` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON UPDATE NO ACTION ON DELETE SET NULL, CONSTRAINT `sessions_vehicle_drivers_sessions` FOREIGN KEY (`driver_id`) REFERENCES `vehicle_drivers` (`id`) ON UPDATE NO ACTION ON DELETE SET NULL) CHARSET utf8mb4 COLLATE utf8mb4_bin;
